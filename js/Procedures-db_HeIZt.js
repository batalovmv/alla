import{u as h,a as m,j as s,I as f,e as _,f as x,h as g,B as j,i as v,s as y}from"./index-DKxZk2j6.js";import{r as u}from"./react-vendor-BQWX9zlF.js";import{i as b,f as z}from"./cache-BeRNp03e.js";import{P as C}from"./ProcedureCard-CV37umjX.js";import{S as d}from"./Select-u3bu_IL3.js";import{S as N}from"./SEO-DYiNhZ28.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-75UNovty.js";import"./form-vendor-BjD3cHyu.js";import"./Card-BwajGH-R.js";const P="_filters_1hzoz_1",S="_search_1hzoz_8",w="_selects_1hzoz_12",p={filters:P,search:S,selects:w},F=()=>{const c=h(),{categories:l,filters:a}=m(e=>e.procedures),i=l.map(e=>({value:e,label:e})),n=[{value:"popular",label:"По популярности"},{value:"price-asc",label:"По цене: сначала дешевые"},{value:"price-desc",label:"По цене: сначала дорогие"},{value:"name",label:"По названию"}];return s.jsxs("div",{className:p.filters,children:[s.jsx("div",{className:p.search,children:s.jsx(f,{type:"text",placeholder:"Поиск процедур...",value:a.search,onChange:e=>c(_(e.target.value))})}),s.jsxs("div",{className:p.selects,children:[s.jsx(d,{label:"Категория",options:[{value:"",label:"Все категории"},...i],value:a.category,onChange:e=>c(x(e.target.value))}),s.jsx(d,{label:"Сортировка",options:n,value:a.sort,onChange:e=>c(g(e.target.value))})]}),(a.category||a.search)&&s.jsx(j,{variant:"outline",size:"small",onClick:()=>c(v()),children:"Сбросить фильтры"})]})},k="_procedures_17lzh_1",E="_container_17lzh_6",L="_title_17lzh_11",M="_subtitle_17lzh_19",O="_grid_17lzh_26",A="_empty_17lzh_32",o={procedures:k,container:E,title:L,subtitle:M,grid:O,empty:A},Q=()=>{const c=h(),{items:l,filters:a,lastFetched:i}=m(e=>e.procedures);u.useEffect(()=>{const e=async()=>{const r=await z();c(y(r))};(l.length===0||b(i,3e5))&&e()},[c,l.length,i]);const n=u.useMemo(()=>{let e=[...l];if(a.category&&(e=e.filter(t=>t.category===a.category)),a.search){const t=a.search.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t)||r.description.toLowerCase().includes(t))}switch(a.sort){case"price-asc":e.sort((t,r)=>t.price-r.price);break;case"price-desc":e.sort((t,r)=>r.price-t.price);break;case"name":e.sort((t,r)=>t.name.localeCompare(r.name));break;case"popular":default:e.sort((t,r)=>t.popular&&!r.popular?-1:!t.popular&&r.popular?1:0);break}return e},[l,a]);return s.jsxs(s.Fragment,{children:[s.jsx(N,{title:"Процедуры",description:"Каталог косметологических процедур. Чистка лица, массаж, обертывания, аппаратная косметология и многое другое.",keywords:"косметологические процедуры, чистка лица, массаж лица, обертывания, косметология услуги"}),s.jsx("div",{className:o.procedures,children:s.jsxs("div",{className:o.container,children:[s.jsx("h1",{className:o.title,children:"Наши процедуры"}),s.jsx("p",{className:o.subtitle,children:"Выберите процедуру, которая подходит именно вам"}),s.jsx(F,{}),n.length>0?s.jsx("div",{className:o.grid,children:n.map(e=>s.jsx(C,{procedure:e},e.id))}):s.jsx("div",{className:o.empty,children:s.jsx("p",{children:"Процедуры не найдены. Попробуйте изменить фильтры."})})]})})]})};export{Q as default};
