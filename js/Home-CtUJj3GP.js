import{j as e,u as F,a as y,s as R,b as L,c as D,d as z,g as V,e as B,f as U,C as W,R as g,B as r,P as q,S as o,h as _,i as J,k as K}from"./index-CQRSAtSo.js";import{r as n,L as v}from"./react-vendor-BQWX9zlF.js";import{u as Q,i as G,f as X,a as Y,b as H}from"./useInView-DZrf2Lgo.js";import{P as Z}from"./ProcedureCard-w68QzgO8.js";import{S as ee}from"./SEO-CX8_GqcH.js";import{g as se}from"./aboutInfo-CjC47zqV.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-mpaoXh-M.js";import"./form-vendor-BjD3cHyu.js";import"./money-Dqo8ClJ3.js";const te="_root_uhum6_1",ae="_content_uhum6_5",ne="_contentVisible_uhum6_14",A={root:te,content:ae,contentVisible:ne},w=({placeholder:i,children:j,className:l,rootMargin:a="0px 0px 300px 0px",onEnter:h})=>{const{ref:x,inView:m}=Q({once:!0,rootMargin:a,threshold:0}),[c,f]=n.useState(!1),[S,u]=n.useState(!1),[p,b]=n.useState(!1);return n.useEffect(()=>{m&&(c||f(!0),p||(b(!0),h?.()))},[m,c,p,h]),n.useEffect(()=>{if(!c)return;const T=window.requestAnimationFrame(()=>u(!0));return()=>window.cancelAnimationFrame(T)},[c]),e.jsx("div",{ref:x,className:[A.root,l||""].filter(Boolean).join(" "),children:c?e.jsx("div",{className:[A.content,S?A.contentVisible:""].filter(Boolean).join(" "),children:j}):i})},ie="_home_5gh21_1",ce="_hero_5gh21_5",re="_heroContent_5gh21_14",oe="_heroTitle_5gh21_19",le="_heroSubtitle_5gh21_27",de="_heroDescription_5gh21_34",he="_heroActions_5gh21_41",xe="_section_5gh21_48",me="_container_5gh21_52",ue="_sectionTitle_5gh21_57",je="_proceduresGrid_5gh21_65",ge="_sectionAction_5gh21_72",_e="_aboutSection_5gh21_76",ve="_aboutContent_5gh21_80",pe="_aboutText_5gh21_87",Ne="_aboutName_5gh21_93",we="_aboutMeta_5gh21_101",fe="_aboutImage_5gh21_114",be="_aboutPhoto_5gh21_118",Se="_imagePlaceholder_5gh21_129",Te="_advantagesGrid_5gh21_142",Ce="_advantageCard_5gh21_148",Ae="_advantageIcon_5gh21_153",Pe="_reviewsSection_5gh21_179",Ie="_reviewsHeader_5gh21_183",Me="_rating_5gh21_192",Ee="_reviewsGrid_5gh21_199",$e="_reviewCard_5gh21_205",ye="_reviewHeader_5gh21_211",Re="_reviewProcedure_5gh21_223",De="_reviewRating_5gh21_229",Ge="_reviewText_5gh21_234",He="_reviewDate_5gh21_241",ke="_ctaSection_5gh21_247",Oe="_ctaCard_5gh21_254",Fe="_ctaActions_5gh21_274",s={home:ie,hero:ce,heroContent:re,heroTitle:oe,heroSubtitle:le,heroDescription:de,heroActions:he,section:xe,container:me,sectionTitle:ue,proceduresGrid:je,sectionAction:ge,aboutSection:_e,aboutContent:ve,aboutText:pe,aboutName:Ne,aboutMeta:we,aboutImage:fe,aboutPhoto:be,imagePlaceholder:Se,advantagesGrid:Te,advantageCard:Ce,advantageIcon:Ae,reviewsSection:Pe,reviewsHeader:Ie,rating:Me,reviewsGrid:Ee,reviewCard:$e,reviewHeader:ye,reviewProcedure:Re,reviewRating:De,reviewText:Ge,reviewDate:He,ctaSection:ke,ctaCard:Oe,ctaActions:Fe};function Le(i,j){const l=String(i||"").replace(/\s+/g," ").trim();if(!l)return"";if(l.length<=j)return l;const a=l.slice(0,j),h=a.lastIndexOf(" ");return`${(h>120?a.slice(0,h):a).trim()}…`}const Ye=()=>{const i=F(),[j,l]=n.useState(null),[a,h]=n.useState(null),[x,m]=n.useState(0),{items:c,lastFetched:f,loading:S}=y(t=>t.procedures),{items:u,averageRating:p,lastFetched:b,loading:T}=y(t=>t.reviews),P=n.useCallback(async()=>{if(c.length===0||G(f,3e5)){i(R(!0));try{const C=await X();i(L(C))}finally{i(R(!1))}}if(u.length===0||G(b,18e4)){i(D(!0));try{const C=await Y();i(z(C))}finally{i(D(!1))}}},[i,c.length,f,u.length,b]);n.useEffect(()=>{P()},[P]),n.useEffect(()=>{let t=!0;return V().then(d=>{t&&l(d)}).catch(()=>{}),()=>{t=!1}},[]),n.useEffect(()=>{let t=!0;return se().then(d=>{t&&h(d)}).catch(()=>{}),()=>{t=!1}},[]);const I=n.useMemo(()=>c.filter(t=>t.popular).slice(0,4),[c]),M=n.useMemo(()=>u.slice(0,3),[u]),N=j||{...W,whatsappPhone:""},k=H(S&&c.length===0,160),O=H(T&&u.length===0,160),E=n.useMemo(()=>{const t=`Здравствуйте! Хочу записаться в ${K}.`;return B({whatsappPhone:N.whatsappPhone,text:t})},[N.whatsappPhone]),$=n.useMemo(()=>U({telegramLink:N.socialMedia.telegram}),[N.socialMedia.telegram]);return e.jsxs(e.Fragment,{children:[e.jsx(ee,{title:"Главная",description:"Профессиональные косметологические процедуры. Индивидуальный подход, современные технологии, гарантия качества.",keywords:"косметология, косметолог, процедуры для лица, косметические услуги"}),e.jsxs("div",{className:s.home,children:[e.jsx("section",{className:s.hero,children:e.jsxs("div",{className:s.heroContent,children:[e.jsxs("h1",{className:s.heroTitle,children:["Профессиональная косметология",e.jsx("br",{}),e.jsx("span",{className:s.heroSubtitle,children:"для вашей красоты"})]}),e.jsx("p",{className:s.heroDescription,children:"Индивидуальный подход к каждому клиенту. Современные технологии и проверенные методики для достижения идеального результата."}),e.jsxs("div",{className:s.heroActions,children:[e.jsx(v,{to:g.CONTACTS,children:e.jsx(r,{size:"large",children:"Записаться на консультацию"})}),e.jsx(v,{to:g.PROCEDURES,children:e.jsx(r,{variant:"outline",size:"large",children:"Посмотреть процедуры"})})]})]})}),x>=0&&e.jsx(w,{onEnter:()=>m(t=>Math.max(t,1)),placeholder:e.jsx("section",{className:s.section,children:e.jsxs("div",{className:s.container,children:[e.jsx(o,{variant:"text",height:32,width:280}),e.jsx("div",{style:{marginTop:24},children:e.jsx(o,{height:360,radius:16})})]})}),children:k?e.jsx("section",{className:s.section,children:e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.sectionTitle,children:"Популярные процедуры"}),e.jsx("div",{className:s.proceduresGrid,children:Array.from({length:4}).map((t,d)=>e.jsx(q,{},d))})]})}):I.length>0?e.jsx("section",{className:s.section,children:e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.sectionTitle,children:"Популярные процедуры"}),e.jsx("div",{className:s.proceduresGrid,children:I.map(t=>e.jsx(Z,{procedure:t},t.id))}),e.jsx("div",{className:s.sectionAction,children:e.jsx(v,{to:g.PROCEDURES,children:e.jsx(r,{variant:"outline",children:"Все процедуры"})})})]})}):null}),x>=1&&e.jsx(w,{onEnter:()=>m(t=>Math.max(t,2)),placeholder:e.jsx("section",{className:`${s.section} ${s.aboutSection}`,children:e.jsxs("div",{className:s.container,children:[e.jsx(o,{variant:"text",height:32,width:240}),e.jsx("div",{style:{marginTop:24},children:e.jsx(o,{height:420,radius:16})})]})}),children:e.jsx("section",{className:`${s.section} ${s.aboutSection}`,children:e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.aboutContent,children:[e.jsxs("div",{className:s.aboutText,children:[e.jsx("h2",{className:s.sectionTitle,children:"О специалисте"}),a?.name&&e.jsx("p",{className:s.aboutName,children:a.name}),a?.description?e.jsx("p",{children:Le(a.description,320)}):e.jsx("p",{children:"Опытный косметолог с многолетним стажем работы. Постоянно повышаю квалификацию и использую современные методики, чтобы вы получали лучший результат."}),a?.education&&e.jsxs("p",{className:s.aboutMeta,children:["Образование: ",a.education]}),a?.experience&&e.jsxs("p",{className:s.aboutMeta,children:["Опыт: ",a.experience]}),e.jsx(v,{to:g.ABOUT,children:e.jsx(r,{children:"Узнать больше"})})]}),e.jsx("div",{className:s.aboutImage,children:a?.photo?e.jsx("img",{className:s.aboutPhoto,src:a.photo,alt:a?.name?`Фото специалиста — ${a.name}`:"Фото специалиста",loading:"lazy",decoding:"async"}):e.jsx("div",{className:s.imagePlaceholder,children:e.jsx("span",{children:"Фото специалиста"})})})]})})})}),x>=2&&e.jsx(w,{onEnter:()=>m(t=>Math.max(t,3)),placeholder:e.jsx("section",{className:s.section,children:e.jsxs("div",{className:s.container,children:[e.jsx(o,{variant:"text",height:32,width:320}),e.jsx("div",{style:{marginTop:24},children:e.jsx(o,{height:320,radius:16})})]})}),children:e.jsx("section",{className:s.section,children:e.jsxs("div",{className:s.container,children:[e.jsx("h2",{className:s.sectionTitle,children:"Почему выбирают нас"}),e.jsxs("div",{className:s.advantagesGrid,children:[e.jsxs(_,{className:s.advantageCard,children:[e.jsx("div",{className:s.advantageIcon,children:"✓"}),e.jsx("h3",{children:"Опыт работы"}),e.jsx("p",{children:"Более 10 лет успешной практики"})]}),e.jsxs(_,{className:s.advantageCard,children:[e.jsx("div",{className:s.advantageIcon,children:"✓"}),e.jsx("h3",{children:"Сертификаты"}),e.jsx("p",{children:"Регулярное повышение квалификации"})]}),e.jsxs(_,{className:s.advantageCard,children:[e.jsx("div",{className:s.advantageIcon,children:"✓"}),e.jsx("h3",{children:"Индивидуальный подход"}),e.jsx("p",{children:"Персональная программа для каждого клиента"})]}),e.jsxs(_,{className:s.advantageCard,children:[e.jsx("div",{className:s.advantageIcon,children:"✓"}),e.jsx("h3",{children:"Современное оборудование"}),e.jsx("p",{children:"Использование новейших технологий"})]})]})]})})}),x>=3&&e.jsx(w,{onEnter:()=>m(t=>Math.max(t,4)),placeholder:e.jsx("section",{className:`${s.section} ${s.reviewsSection}`,children:e.jsxs("div",{className:s.container,children:[e.jsx(o,{variant:"text",height:32,width:260}),e.jsx("div",{style:{marginTop:24},children:e.jsx(o,{height:360,radius:16})})]})}),children:O?e.jsx("section",{className:`${s.section} ${s.reviewsSection}`,children:e.jsxs("div",{className:s.container,children:[e.jsx("div",{className:s.reviewsHeader,children:e.jsx("div",{children:e.jsx("h2",{className:s.sectionTitle,children:"Отзывы клиентов"})})}),e.jsx("div",{className:s.reviewsGrid,children:Array.from({length:3}).map((t,d)=>e.jsx(J,{},d))})]})}):M.length>0?e.jsx("section",{className:`${s.section} ${s.reviewsSection}`,children:e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.reviewsHeader,children:[e.jsxs("div",{children:[e.jsx("h2",{className:s.sectionTitle,children:"Отзывы клиентов"}),p>0&&e.jsxs("p",{className:s.rating,children:["Средняя оценка: ",p.toFixed(1)," ⭐"]})]}),e.jsx(v,{to:g.REVIEWS,children:e.jsx(r,{variant:"outline",children:"Все отзывы"})})]}),e.jsx("div",{className:s.reviewsGrid,children:M.map(t=>e.jsxs(_,{className:s.reviewCard,children:[e.jsxs("div",{className:s.reviewHeader,children:[e.jsxs("div",{children:[e.jsx("h4",{children:t.clientName}),e.jsx("p",{className:s.reviewProcedure,children:t.procedureName})]}),e.jsx("div",{className:s.reviewRating,children:"⭐".repeat(t.rating)})]}),e.jsx("p",{className:s.reviewText,children:t.text}),e.jsx("p",{className:s.reviewDate,children:t.date})]},t.id))})]})}):null}),x>=4&&e.jsx(w,{placeholder:e.jsx("section",{className:`${s.section} ${s.ctaSection}`,children:e.jsx("div",{className:s.container,children:e.jsx(o,{height:220,radius:16})})}),children:e.jsx("section",{className:`${s.section} ${s.ctaSection}`,children:e.jsx("div",{className:s.container,children:e.jsxs(_,{className:s.ctaCard,children:[e.jsx("h2",{children:"Готовы начать?"}),e.jsx("p",{children:"Запишитесь на консультацию и узнайте, как мы можем помочь"}),e.jsxs("div",{className:s.ctaActions,children:[e.jsx(v,{to:g.CONTACTS,children:e.jsx(r,{size:"large",children:"Записаться"})}),e.jsx("a",{href:`tel:${N.phone}`,children:e.jsx(r,{variant:"outline",size:"large",children:"Позвонить"})}),E&&e.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",children:e.jsx(r,{variant:"outline",size:"large",children:"WhatsApp"})}),$&&e.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer",children:e.jsx(r,{variant:"outline",size:"large",children:"Telegram"})})]})]})})})})]})]})};export{Ye as default};
