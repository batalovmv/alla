import{u as I,a as b,g as v,j as e,o as C,R as h,B as o,S as P,e as k,f as T,C as E,h as _,s as g,b as w}from"./index-BNwcWhVm.js";import{e as F,r as l,L as u}from"./react-vendor-BQWX9zlF.js";import{i as L,u as B,f as G}from"./useDelayedFlag-CNAZq2LX.js";import{P as A}from"./ProcedureCard-D6pO4DFD.js";import{S as D}from"./SEO-Nim507aB.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-CGxEfUHl.js";import"./form-vendor-BjD3cHyu.js";const M="_detail_p2xx8_1",O="_container_p2xx8_5",R="_content_p2xx8_10",$="_imageSection_p2xx8_17",H="_mainImage_p2xx8_23",V="_imageGallery_p2xx8_30",z="_galleryImage_p2xx8_36",U="_infoSection_p2xx8_49",W="_title_p2xx8_55",q="_category_p2xx8_62",J="_description_p2xx8_69",K="_details_p2xx8_76",Q="_detailItem_p2xx8_85",X="_detailLabel_p2xx8_91",Y="_detailValue_p2xx8_96",Z="_bookButton_p2xx8_102",ee="_sections_p2xx8_106",ae="_sectionCard_p2xx8_113",se="_list_p2xx8_119",te="_related_p2xx8_130",ie="_relatedTitle_p2xx8_134",ne="_relatedGrid_p2xx8_142",le="_notFound_p2xx8_148",a={detail:M,container:O,content:R,imageSection:$,mainImage:H,imageGallery:V,galleryImage:z,infoSection:U,title:W,category:q,description:J,details:K,detailItem:Q,detailLabel:X,detailValue:Y,bookButton:Z,sections:ee,sectionCard:ae,list:se,related:te,relatedTitle:ie,relatedGrid:ne,notFound:le},ge=()=>{const{id:j}=F(),c=I(),{items:n,lastFetched:d,loading:f}=b(t=>t.procedures),[N,y]=l.useState(null);l.useEffect(()=>{const t=async()=>{c(g(!0));try{const S=await G();c(w(S))}finally{c(g(!1))}};(n.length===0||L(d,3e5))&&t()},[c,n.length,d]),l.useEffect(()=>{let t=!0;return v().then(i=>{t&&y(i)}).catch(()=>{}),()=>{t=!1}},[]);const s=n.find(t=>t.id===j);if(B(f&&n.length===0,160))return e.jsx(C,{variant:"procedureDetail"});if(!s)return e.jsx("div",{className:a.notFound,children:e.jsxs("div",{className:a.container,children:[e.jsx("h1",{children:"Процедура не найдена"}),e.jsx(u,{to:h.PROCEDURES,children:e.jsx(o,{children:"Вернуться к списку процедур"})})]})});const m=n.filter(t=>t.category===s.category&&t.id!==s.id).slice(0,3),r=N||{...E,whatsappPhone:""},x=l.useMemo(()=>{const t=`Здравствуйте! Хочу записаться в ${P} на процедуру "${s.name}".`;return k({whatsappPhone:r.whatsappPhone,text:t})},[r.whatsappPhone,s.name]),p=l.useMemo(()=>T({telegramLink:r.socialMedia.telegram}),[r.socialMedia.telegram]);return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:s.name,description:s.description,keywords:`${s.name}, ${s.category}, косметология`}),e.jsx("div",{className:a.detail,children:e.jsxs("div",{className:a.container,children:[e.jsxs("div",{className:a.content,children:[e.jsxs("div",{className:a.imageSection,children:[e.jsx("img",{src:s.images[0]||"/images/placeholder.jpg",alt:s.name,className:a.mainImage,loading:"eager"}),s.images.length>1&&e.jsx("div",{className:a.imageGallery,children:s.images.slice(1).map((t,i)=>e.jsx("img",{src:t,alt:`${s.name} ${i+2}`,className:a.galleryImage,loading:"lazy"},i))})]}),e.jsxs("div",{className:a.infoSection,children:[e.jsx("h1",{className:a.title,children:s.name}),e.jsx("p",{className:a.category,children:s.category}),e.jsx("p",{className:a.description,children:s.fullDescription}),e.jsxs("div",{className:a.details,children:[e.jsxs("div",{className:a.detailItem,children:[e.jsx("span",{className:a.detailLabel,children:"Стоимость:"}),e.jsxs("span",{className:a.detailValue,children:[s.price," ₽"]})]}),e.jsxs("div",{className:a.detailItem,children:[e.jsx("span",{className:a.detailLabel,children:"Длительность:"}),e.jsxs("span",{className:a.detailValue,children:[s.duration," минут"]})]})]}),e.jsx(u,{to:h.CONTACTS_WITH_PROCEDURE(s.id),children:e.jsx(o,{size:"large",className:a.bookButton,children:"Записаться на процедуру"})}),x&&e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{variant:"outline",size:"large",className:a.bookButton,children:"WhatsApp"})}),p&&e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{variant:"outline",size:"large",className:a.bookButton,children:"Telegram"})})]})]}),e.jsxs("div",{className:a.sections,children:[s.indications.length>0&&e.jsxs(_,{className:a.sectionCard,children:[e.jsx("h2",{children:"Показания"}),e.jsx("ul",{className:a.list,children:s.indications.map((t,i)=>e.jsx("li",{children:t},i))})]}),s.contraindications.length>0&&e.jsxs(_,{className:a.sectionCard,children:[e.jsx("h2",{children:"Противопоказания"}),e.jsx("ul",{className:a.list,children:s.contraindications.map((t,i)=>e.jsx("li",{children:t},i))})]})]}),m.length>0&&e.jsxs("div",{className:a.related,children:[e.jsx("h2",{className:a.relatedTitle,children:"Похожие процедуры"}),e.jsx("div",{className:a.relatedGrid,children:m.map(t=>e.jsx(A,{procedure:t},t.id))})]})]})})]})};export{ge as default};
