import{u as v,a as b,g as C,j as e,o as P,R as _,B as o,S as k,e as T,f as E,C as M,h as g,s as u,b as w}from"./index-ukDIIbbg.js";import{e as F,r as l,L as j}from"./react-vendor-BQWX9zlF.js";import{i as L,u as R,R as d,f as B}from"./Reveal-BCIHdFxc.js";import{P as G}from"./ProcedureCard-h1m2DBBp.js";import{S as A}from"./SEO-CXx0XOy8.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-CGxEfUHl.js";import"./form-vendor-BjD3cHyu.js";const D="_detail_p2xx8_1",O="_container_p2xx8_5",$="_content_p2xx8_10",H="_imageSection_p2xx8_17",V="_mainImage_p2xx8_23",z="_imageGallery_p2xx8_30",U="_galleryImage_p2xx8_36",W="_infoSection_p2xx8_49",q="_title_p2xx8_55",J="_category_p2xx8_62",K="_description_p2xx8_69",Q="_details_p2xx8_76",X="_detailItem_p2xx8_85",Y="_detailLabel_p2xx8_91",Z="_detailValue_p2xx8_96",ee="_bookButton_p2xx8_102",ae="_sections_p2xx8_106",se="_sectionCard_p2xx8_113",te="_list_p2xx8_119",ie="_related_p2xx8_130",ne="_relatedTitle_p2xx8_134",le="_relatedGrid_p2xx8_142",ce="_notFound_p2xx8_148",a={detail:D,container:O,content:$,imageSection:H,mainImage:V,imageGallery:z,galleryImage:U,infoSection:W,title:q,category:J,description:K,details:Q,detailItem:X,detailLabel:Y,detailValue:Z,bookButton:ee,sections:ae,sectionCard:se,list:te,related:ie,relatedTitle:ne,relatedGrid:le,notFound:ce},ue=()=>{const{id:f}=F(),c=v(),{items:n,lastFetched:m,loading:N}=b(t=>t.procedures),[y,S]=l.useState(null);l.useEffect(()=>{const t=async()=>{c(u(!0));try{const I=await B();c(w(I))}finally{c(u(!1))}};(n.length===0||L(m,3e5))&&t()},[c,n.length,m]),l.useEffect(()=>{let t=!0;return C().then(i=>{t&&S(i)}).catch(()=>{}),()=>{t=!1}},[]);const s=n.find(t=>t.id===f);if(R(N&&n.length===0,160))return e.jsx(P,{variant:"procedureDetail"});if(!s)return e.jsx("div",{className:a.notFound,children:e.jsxs("div",{className:a.container,children:[e.jsx("h1",{children:"Процедура не найдена"}),e.jsx(j,{to:_.PROCEDURES,children:e.jsx(o,{children:"Вернуться к списку процедур"})})]})});const x=n.filter(t=>t.category===s.category&&t.id!==s.id).slice(0,3),r=y||{...M,whatsappPhone:""},h=l.useMemo(()=>{const t=`Здравствуйте! Хочу записаться в ${k} на процедуру "${s.name}".`;return T({whatsappPhone:r.whatsappPhone,text:t})},[r.whatsappPhone,s.name]),p=l.useMemo(()=>E({telegramLink:r.socialMedia.telegram}),[r.socialMedia.telegram]);return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:s.name,description:s.description,keywords:`${s.name}, ${s.category}, косметология`}),e.jsx("div",{className:a.detail,children:e.jsxs("div",{className:a.container,children:[e.jsxs("div",{className:a.content,children:[e.jsxs("div",{className:a.imageSection,children:[e.jsx("img",{src:s.images[0]||"/images/placeholder.jpg",alt:s.name,className:a.mainImage,loading:"eager"}),s.images.length>1&&e.jsx("div",{className:a.imageGallery,children:s.images.slice(1).map((t,i)=>e.jsx("img",{src:t,alt:`${s.name} ${i+2}`,className:a.galleryImage,loading:"lazy"},i))})]}),e.jsxs("div",{className:a.infoSection,children:[e.jsx("h1",{className:a.title,children:s.name}),e.jsx("p",{className:a.category,children:s.category}),e.jsx("p",{className:a.description,children:s.fullDescription}),e.jsxs("div",{className:a.details,children:[e.jsxs("div",{className:a.detailItem,children:[e.jsx("span",{className:a.detailLabel,children:"Стоимость:"}),e.jsxs("span",{className:a.detailValue,children:[s.price," ₽"]})]}),e.jsxs("div",{className:a.detailItem,children:[e.jsx("span",{className:a.detailLabel,children:"Длительность:"}),e.jsxs("span",{className:a.detailValue,children:[s.duration," минут"]})]})]}),e.jsx(j,{to:_.CONTACTS_WITH_PROCEDURE(s.id),children:e.jsx(o,{size:"large",className:a.bookButton,children:"Записаться на процедуру"})}),h&&e.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{variant:"outline",size:"large",className:a.bookButton,children:"WhatsApp"})}),p&&e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:e.jsx(o,{variant:"outline",size:"large",className:a.bookButton,children:"Telegram"})})]})]}),e.jsxs("div",{className:a.sections,children:[s.indications.length>0&&e.jsx(d,{children:e.jsxs(g,{className:a.sectionCard,children:[e.jsx("h2",{children:"Показания"}),e.jsx("ul",{className:a.list,children:s.indications.map((t,i)=>e.jsx("li",{children:t},i))})]})}),s.contraindications.length>0&&e.jsx(d,{delayMs:50,children:e.jsxs(g,{className:a.sectionCard,children:[e.jsx("h2",{children:"Противопоказания"}),e.jsx("ul",{className:a.list,children:s.contraindications.map((t,i)=>e.jsx("li",{children:t},i))})]})})]}),x.length>0&&e.jsx(d,{children:e.jsxs("div",{className:a.related,children:[e.jsx("h2",{className:a.relatedTitle,children:"Похожие процедуры"}),e.jsx("div",{className:a.relatedGrid,children:x.map((t,i)=>e.jsx(d,{delayMs:Math.min(i*24,180),children:e.jsx(G,{procedure:t})},t.id))})]})})]})})]})};export{ue as default};
