import{x as m,y as c,z as w,A as p,_ as i}from"./index-BNwcWhVm.js";import{r as s}from"./react-vendor-BQWX9zlF.js";async function o(){return(await i(()=>import("./mockData-INJWuUSN.js"),[])).mockProcedures}async function a(){return(await i(()=>import("./mockData-INJWuUSN.js"),[])).mockReviews}const g=async()=>{try{return await m.getAll()}catch(e){return console.error("Ошибка загрузки процедур из Firebase:",e),await o()}return await new Promise(e=>setTimeout(e,500)),await o()},l=async()=>{try{return await c.getApproved()}catch(e){return console.error("Ошибка загрузки отзывов из Firebase:",e),await a()}return await new Promise(e=>setTimeout(e,300)),await a()},v=async e=>{try{return await p.create(e),{success:!0,message:"Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}}catch(r){return console.error("Ошибка отправки заявки в Firebase:",r),{success:!1,message:"Ошибка при отправке заявки. Попробуйте позже."}}return await new Promise(r=>setTimeout(r,1e3)),{success:!0,message:"Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}},_=async e=>{try{const r=await c.create({clientName:e.clientName,procedureId:e.procedureId,procedureName:e.procedureName,rating:e.rating,text:e.text,date:new Date().toISOString().split("T")[0]});return await w.upsert(r,{phone:e.phone}),{success:!0,message:"Спасибо! Отзыв отправлен и появится на сайте после модерации."}}catch(r){return console.error("Ошибка отправки отзыва в Firebase:",r),{success:!1,message:"Ошибка при отправке отзыва. Попробуйте позже."}}return{success:!0,message:"Спасибо! Отзыв сохранён локально (режим без Firebase)."}};function y(e,r){return e?Date.now()-e>r:!0}function b(e,r=150){const[n,t]=s.useState(!1);return s.useEffect(()=>{if(!e){t(!1);return}const u=window.setTimeout(()=>t(!0),r);return()=>window.clearTimeout(u)},[e,r]),n}export{l as a,v as b,g as f,y as i,_ as s,b as u};
