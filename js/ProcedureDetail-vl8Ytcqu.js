import{u as y,a as I,g as S,j as e,R as _,B as r,S as C,c as v,d as b,C as P,s as T}from"./index-ULYf0HN_.js";import{e as E,r as n,L as h}from"./react-vendor-BQWX9zlF.js";import{i as k,f as B}from"./cache-C1cT7jXn.js";import{C as g}from"./Card-Dg84Exp1.js";import{P as G}from"./ProcedureCard-H92n4qk2.js";import{S as L}from"./SEO-B4I4JnaD.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-CGxEfUHl.js";import"./form-vendor-BjD3cHyu.js";const w="_detail_p2xx8_1",A="_container_p2xx8_5",F="_content_p2xx8_10",M="_imageSection_p2xx8_17",O="_mainImage_p2xx8_23",R="_imageGallery_p2xx8_30",$="_galleryImage_p2xx8_36",D="_infoSection_p2xx8_49",H="_title_p2xx8_55",V="_category_p2xx8_62",z="_description_p2xx8_69",U="_details_p2xx8_76",W="_detailItem_p2xx8_85",q="_detailLabel_p2xx8_91",J="_detailValue_p2xx8_96",K="_bookButton_p2xx8_102",Q="_sections_p2xx8_106",X="_sectionCard_p2xx8_113",Y="_list_p2xx8_119",Z="_related_p2xx8_130",ee="_relatedTitle_p2xx8_134",se="_relatedGrid_p2xx8_142",ae="_notFound_p2xx8_148",s={detail:w,container:A,content:F,imageSection:M,mainImage:O,imageGallery:R,galleryImage:$,infoSection:D,title:H,category:V,description:z,details:U,detailItem:W,detailLabel:q,detailValue:J,bookButton:K,sections:Q,sectionCard:X,list:Y,related:Z,relatedTitle:ee,relatedGrid:se,notFound:ae},xe=()=>{const{id:u}=E(),o=y(),{items:l,lastFetched:d}=I(t=>t.procedures),[j,f]=n.useState(null);n.useEffect(()=>{const t=async()=>{const N=await B();o(T(N))};(l.length===0||k(d,3e5))&&t()},[o,l.length,d]),n.useEffect(()=>{let t=!0;return S().then(i=>{t&&f(i)}).catch(()=>{}),()=>{t=!1}},[]);const a=l.find(t=>t.id===u);if(!a)return e.jsx("div",{className:s.notFound,children:e.jsxs("div",{className:s.container,children:[e.jsx("h1",{children:"Процедура не найдена"}),e.jsx(h,{to:_.PROCEDURES,children:e.jsx(r,{children:"Вернуться к списку процедур"})})]})});const m=l.filter(t=>t.category===a.category&&t.id!==a.id).slice(0,3),c=j||{...P,whatsappPhone:""},x=n.useMemo(()=>{const t=`Здравствуйте! Хочу записаться в ${C} на процедуру "${a.name}".`;return v({whatsappPhone:c.whatsappPhone,text:t})},[c.whatsappPhone,a.name]),p=n.useMemo(()=>b({telegramLink:c.socialMedia.telegram}),[c.socialMedia.telegram]);return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:a.name,description:a.description,keywords:`${a.name}, ${a.category}, косметология`}),e.jsx("div",{className:s.detail,children:e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.content,children:[e.jsxs("div",{className:s.imageSection,children:[e.jsx("img",{src:a.images[0]||"/images/placeholder.jpg",alt:a.name,className:s.mainImage,loading:"eager"}),a.images.length>1&&e.jsx("div",{className:s.imageGallery,children:a.images.slice(1).map((t,i)=>e.jsx("img",{src:t,alt:`${a.name} ${i+2}`,className:s.galleryImage,loading:"lazy"},i))})]}),e.jsxs("div",{className:s.infoSection,children:[e.jsx("h1",{className:s.title,children:a.name}),e.jsx("p",{className:s.category,children:a.category}),e.jsx("p",{className:s.description,children:a.fullDescription}),e.jsxs("div",{className:s.details,children:[e.jsxs("div",{className:s.detailItem,children:[e.jsx("span",{className:s.detailLabel,children:"Стоимость:"}),e.jsxs("span",{className:s.detailValue,children:[a.price," ₽"]})]}),e.jsxs("div",{className:s.detailItem,children:[e.jsx("span",{className:s.detailLabel,children:"Длительность:"}),e.jsxs("span",{className:s.detailValue,children:[a.duration," минут"]})]})]}),e.jsx(h,{to:_.CONTACTS_WITH_PROCEDURE(a.id),children:e.jsx(r,{size:"large",className:s.bookButton,children:"Записаться на процедуру"})}),x&&e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",children:e.jsx(r,{variant:"outline",size:"large",className:s.bookButton,children:"WhatsApp"})}),p&&e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:e.jsx(r,{variant:"outline",size:"large",className:s.bookButton,children:"Telegram"})})]})]}),e.jsxs("div",{className:s.sections,children:[a.indications.length>0&&e.jsxs(g,{className:s.sectionCard,children:[e.jsx("h2",{children:"Показания"}),e.jsx("ul",{className:s.list,children:a.indications.map((t,i)=>e.jsx("li",{children:t},i))})]}),a.contraindications.length>0&&e.jsxs(g,{className:s.sectionCard,children:[e.jsx("h2",{children:"Противопоказания"}),e.jsx("ul",{className:s.list,children:a.contraindications.map((t,i)=>e.jsx("li",{children:t},i))})]})]}),m.length>0&&e.jsxs("div",{className:s.related,children:[e.jsx("h2",{className:s.relatedTitle,children:"Похожие процедуры"}),e.jsx("div",{className:s.relatedGrid,children:m.map(t=>e.jsx(G,{procedure:t},t.id))})]})]})})]})};export{xe as default};
