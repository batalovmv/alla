import{x as g,y as v,z as y,A as x,_ as p,j as R}from"./index-ukDIIbbg.js";import{r as o}from"./react-vendor-BQWX9zlF.js";async function m(){return(await p(()=>import("./mockData-INJWuUSN.js"),[])).mockProcedures}async function w(){return(await p(()=>import("./mockData-INJWuUSN.js"),[])).mockReviews}const D=async()=>{try{return await g.getAll()}catch(e){return console.error("Ошибка загрузки процедур из Firebase:",e),await m()}return await new Promise(e=>setTimeout(e,500)),await m()},O=async()=>{try{return await v.getApproved()}catch(e){return console.error("Ошибка загрузки отзывов из Firebase:",e),await w()}return await new Promise(e=>setTimeout(e,300)),await w()},V=async e=>{try{return await x.create(e),{success:!0,message:"Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}}catch(r){return console.error("Ошибка отправки заявки в Firebase:",r),{success:!1,message:"Ошибка при отправке заявки. Попробуйте позже."}}return await new Promise(r=>setTimeout(r,1e3)),{success:!0,message:"Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}},A=async e=>{try{const r=await v.create({clientName:e.clientName,procedureId:e.procedureId,procedureName:e.procedureName,rating:e.rating,text:e.text,date:new Date().toISOString().split("T")[0]});return await y.upsert(r,{phone:e.phone}),{success:!0,message:"Спасибо! Отзыв отправлен и появится на сайте после модерации."}}catch(r){return console.error("Ошибка отправки отзыва в Firebase:",r),{success:!1,message:"Ошибка при отправке отзыва. Попробуйте позже."}}return{success:!0,message:"Спасибо! Отзыв сохранён локально (режим без Firebase)."}};function F(e,r){return e?Date.now()-e>r:!0}function N(e,r=150){const[n,t]=o.useState(!1);return o.useEffect(()=>{if(!e){t(!1);return}const s=window.setTimeout(()=>t(!0),r);return()=>window.clearTimeout(s)},[e,r]),n}function I(e){const{root:r=null,rootMargin:n="0px",threshold:t=0,once:s=!0}=e||{},[l,c]=o.useState(!1),i=o.useRef(null),f=o.useRef(null),b=o.useCallback(a=>{i.current=a},[]);return o.useEffect(()=>{const a=i.current;if(!a)return;if(typeof IntersectionObserver>"u"){c(!0);return}f.current?.disconnect();const u=new IntersectionObserver(_=>{!!_[0]?.isIntersecting?(c(!0),s&&u.disconnect()):s||c(!1)},{root:r,rootMargin:n,threshold:t});return f.current=u,u.observe(a),()=>{u.disconnect()}},[r,n,t,s]),{ref:b,inView:l}}const h="_root_13dod_1",P="_visible_13dod_10",d={root:h,visible:P},j=({children:e,className:r,once:n=!0,delayMs:t=0,rootMargin:s="0px 0px -8% 0px"})=>{const{ref:l,inView:c}=I({once:n,rootMargin:s}),i=[d.root,c?d.visible:"",r||""].filter(Boolean).join(" ");return R.jsx("div",{ref:l,className:i,style:t?{transitionDelay:`${t}ms`}:void 0,children:e})};export{j as R,O as a,I as b,V as c,D as f,F as i,A as s,N as u};
