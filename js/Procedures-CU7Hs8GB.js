import{u as f,a as g,j as e,I as x,k as j,l as v,m as y,B as b,n as z,P as C,s as u,b as N}from"./index-BNwcWhVm.js";import{r as h}from"./react-vendor-BQWX9zlF.js";import{i as P,u as S,f as k}from"./useDelayedFlag-CNAZq2LX.js";import{P as w}from"./ProcedureCard-D6pO4DFD.js";import{S as m}from"./Select-EiEmReL5.js";import{S as F}from"./SEO-Nim507aB.js";import"./redux-vendor-B8TTZsxA.js";import"./firebase-vendor-CGxEfUHl.js";import"./form-vendor-BjD3cHyu.js";const L="_filters_1hzoz_1",E="_search_1hzoz_8",A="_selects_1hzoz_12",d={filters:L,search:E,selects:A},M=()=>{const c=f(),{categories:o,filters:l}=g(r=>r.procedures),n=o.map(r=>({value:r,label:r})),p=[{value:"popular",label:"По популярности"},{value:"price-asc",label:"По цене: сначала дешевые"},{value:"price-desc",label:"По цене: сначала дорогие"},{value:"name",label:"По названию"}];return e.jsxs("div",{className:d.filters,children:[e.jsx("div",{className:d.search,children:e.jsx(x,{type:"text",placeholder:"Поиск процедур...",value:l.search,onChange:r=>c(j(r.target.value))})}),e.jsxs("div",{className:d.selects,children:[e.jsx(m,{label:"Категория",options:[{value:"",label:"Все категории"},...n],value:l.category,onChange:r=>c(v(r.target.value))}),e.jsx(m,{label:"Сортировка",options:p,value:l.sort,onChange:r=>c(y(r.target.value))})]}),(l.category||l.search)&&e.jsx(b,{variant:"outline",size:"small",onClick:()=>c(z()),children:"Сбросить фильтры"})]})},O="_procedures_17lzh_1",B="_container_17lzh_6",D="_title_17lzh_11",I="_subtitle_17lzh_19",R="_grid_17lzh_26",$="_empty_17lzh_32",i={procedures:O,container:B,title:D,subtitle:I,grid:R,empty:$},W=()=>{const c=f(),{items:o,filters:l,lastFetched:n,loading:p}=g(s=>s.procedures);h.useEffect(()=>{const s=async()=>{c(u(!0));try{const a=await k();c(N(a))}finally{c(u(!1))}};(o.length===0||P(n,3e5))&&s()},[c,o.length,n]);const r=h.useMemo(()=>{let s=[...o];if(l.category&&(s=s.filter(t=>t.category===l.category)),l.search){const t=l.search.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(t)||a.description.toLowerCase().includes(t))}switch(l.sort){case"price-asc":s.sort((t,a)=>t.price-a.price);break;case"price-desc":s.sort((t,a)=>a.price-t.price);break;case"name":s.sort((t,a)=>t.name.localeCompare(a.name));break;case"popular":default:s.sort((t,a)=>t.popular&&!a.popular?-1:!t.popular&&a.popular?1:0);break}return s},[o,l]),_=S(p&&o.length===0,160);return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Процедуры",description:"Каталог косметологических процедур. Чистка лица, массаж, обертывания, аппаратная косметология и многое другое.",keywords:"косметологические процедуры, чистка лица, массаж лица, обертывания, косметология услуги"}),e.jsx("div",{className:i.procedures,children:e.jsxs("div",{className:i.container,children:[e.jsx("h1",{className:i.title,children:"Наши процедуры"}),e.jsx("p",{className:i.subtitle,children:"Выберите процедуру, которая подходит именно вам"}),e.jsx(M,{}),_?e.jsx("div",{className:i.grid,children:Array.from({length:6}).map((s,t)=>e.jsx(C,{},t))}):r.length>0?e.jsx("div",{className:i.grid,children:r.map(s=>e.jsx(w,{procedure:s},s.id))}):e.jsx("div",{className:i.empty,children:e.jsx("p",{children:"Процедуры не найдены. Попробуйте изменить фильтры."})})]})})]})};export{W as default};
